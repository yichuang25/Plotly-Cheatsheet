[["index.html", "Plotly Cheatsheet Chapter 1 Introduction 1.1 Getting Start 1.2 Installation", " Plotly Cheatsheet Taichen Zhou, Yichen Huang 2022-11-04 Chapter 1 Introduction 1.1 Getting Start plotly is an R package for creating interactive web-based graphs via the open source JavaScript graphing library plotly.js. As of version 2.0 (November 17, 2015), graphs created with the plotly R package are rendered locally through the htmlwidgets framework. 1.2 Installation 1.2.1 CRAN Use the install.package() function to install the plotly R package from CRAN. This version may not be the absolute latest version, so we recommend downloading from Github using the instructions below if you can. install.packages(&#39;plotly&#39;) 1.2.2 GitHub Alternatively, you can install the latest development version of plotly from GitHub via the devtools R package: devtools::install_github(&quot;ropensci/plotly&quot;) "],["basic-charts.html", "Chapter 2 Basic Charts 2.1 Scatter Plots 2.2 Line Plots 2.3 Bar Charts 2.4 Pie Charts 2.5 Bubble Charts 2.6 Sankey Diagram", " Chapter 2 Basic Charts 2.1 Scatter Plots 2.1.1 Basic Scatter Plot library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y= ~mpg, type = &quot;scatter&quot;, mode = &quot;markers&quot;) fig 2.1.2 Styled Scatter Plots library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y= ~mpg, type = &quot;scatter&quot;, mode = &quot;markers&quot;ï¼Œ marker = list(size = 10, color = &#39;rgba(255, 182, 193, .9)&#39;, line = list(color = &#39;rgba(152, 0, 0, .8)&#39;, width = 2))) fig &lt;- fig %&gt;% layout(title = &#39;Styled Scatter&#39;, yaxis = list(zeroline = FALSE), xaxis = list(zeroline = FALSE)) fig 2.1.3 Qualitative Colorscales library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y = ~mpg, color = ~cyl) fig 2.2 Line Plots 2.2.1 Basic Line Plot library(plotly) x &lt;- c(1:100) random_y &lt;- rnorm(100, mean = 0) data &lt;- data.frame(x, random_y) fig &lt;- plot_ly(data, x = ~x, y = ~random_y, type = &#39;scatter&#39;, mode = &#39;lines&#39;) fig 2.2.2 Line Plots Mode library(plotly) trace_0 &lt;- rnorm(100, mean = 5) trace_1 &lt;- rnorm(100, mean = 0) trace_2 &lt;- rnorm(100, mean = -5) x &lt;- c(1:100) data &lt;- data.frame(x, trace_0, trace_1, trace_2) fig &lt;- plot_ly(data, x = ~x, y = ~trace_0, name = &#39;trace 0&#39;, type = &#39;scatter&#39;, mode = &#39;lines&#39;) fig &lt;- fig %&gt;% add_trace(y = ~trace_1, name = &#39;trace 1&#39;, mode = &#39;lines+markers&#39;) fig &lt;- fig %&gt;% add_trace(y = ~trace_2, name = &#39;trace 2&#39;, mode = &#39;markers&#39;) fig 2.2.3 Density Plot library(plotly) dens &lt;- with(diamonds, tapply(price, INDEX = cut, density)) df &lt;- data.frame( x = unlist(lapply(dens, &quot;[[&quot;, &quot;x&quot;)), y = unlist(lapply(dens, &quot;[[&quot;, &quot;y&quot;)), cut = rep(names(dens), each = length(dens[[1]]$x)) ) fig &lt;- plot_ly(df, x = ~x, y = ~y, color = ~cut) fig &lt;- fig %&gt;% add_lines() fig 2.3 Bar Charts 2.3.1 Basic Bar Chart library(plotly) fig &lt;- plot_ly( x = c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;), y = c(20, 14, 23), name = &quot;SF Zoo&quot;, type = &quot;bar&quot; ) fig 2.3.2 Grouped Bar Chart library(plotly) Animals &lt;- c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;) SF_Zoo &lt;- c(20, 14, 23) LA_Zoo &lt;- c(12, 18, 29) data &lt;- data.frame(Animals, SF_Zoo, LA_Zoo) fig &lt;- plot_ly(data, x = ~Animals, y = ~SF_Zoo, type = &#39;bar&#39;, name = &#39;SF Zoo&#39;) fig &lt;- fig %&gt;% add_trace(y = ~LA_Zoo, name = &#39;LA Zoo&#39;) fig &lt;- fig %&gt;% layout(yaxis = list(title = &#39;Count&#39;), barmode = &#39;group&#39;) fig 2.3.3 Stacked Bar Chart library(plotly) Animals &lt;- c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;) SF_Zoo &lt;- c(20, 14, 23) LA_Zoo &lt;- c(12, 18, 29) data &lt;- data.frame(Animals, SF_Zoo, LA_Zoo) fig &lt;- plot_ly(data, x = ~Animals, y = ~SF_Zoo, type = &#39;bar&#39;, name = &#39;SF Zoo&#39;) fig &lt;- fig %&gt;% add_trace(y = ~LA_Zoo, name = &#39;LA Zoo&#39;) fig &lt;- fig %&gt;% layout(yaxis = list(title = &#39;Count&#39;), barmode = &#39;stack&#39;) fig 2.3.4 Colored and Styled Bar Chart library(plotly) x &lt;- c(1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012) roW &lt;- c(219, 146, 112, 127, 124, 180, 236, 207, 236, 263, 350, 430, 474, 526, 488, 537, 500, 439) China &lt;- c(16, 13, 10, 11, 28, 37, 43, 55, 56, 88, 105, 156, 270, 299, 340, 403, 549, 499) data &lt;- data.frame(x, roW, China) fig &lt;- plot_ly(data, x = ~x, y = ~roW, type = &#39;bar&#39;, name = &#39;Rest of the World&#39;, marker = list(color = &#39;rgb(55, 83, 109)&#39;)) fig &lt;- fig %&gt;% add_trace(y = ~China, name = &#39;China&#39;, marker = list(color = &#39;rgb(26, 118, 255)&#39;)) fig &lt;- fig %&gt;% layout(title = &#39;US Export of Plastic Scrap&#39;, xaxis = list( title = &quot;&quot;, tickfont = list( size = 14, color = &#39;rgb(107, 107, 107)&#39;)), yaxis = list( title = &#39;USD (millions)&#39;, titlefont = list( size = 16, color = &#39;rgb(107, 107, 107)&#39;), tickfont = list( size = 14, color = &#39;rgb(107, 107, 107)&#39;)), legend = list(x = 0, y = 1, bgcolor = &#39;rgba(255, 255, 255, 0)&#39;, bordercolor = &#39;rgba(255, 255, 255, 0)&#39;), barmode = &#39;group&#39;, bargap = 0.15, bargroupgap = 0.1) fig 2.4 Pie Charts 2.4.1 Basic Pie Chart library(plotly) USPersonalExpenditure &lt;- data.frame(&quot;Categorie&quot;=rownames(USPersonalExpenditure), USPersonalExpenditure) data &lt;- USPersonalExpenditure[,c(&#39;Categorie&#39;, &#39;X1960&#39;)] fig &lt;- plot_ly(data, labels = ~Categorie, values = ~X1960, type = &#39;pie&#39;) fig &lt;- fig %&gt;% layout(title = &#39;United States Personal Expenditures by Categories in 1960&#39;, xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE), yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)) fig 2.4.2 Donut Chart library(plotly) library(dplyr) # Get Manufacturer mtcars$manuf &lt;- sapply(strsplit(rownames(mtcars), &quot; &quot;), &quot;[[&quot;, 1) df &lt;- mtcars df &lt;- df %&gt;% group_by(manuf) df &lt;- df %&gt;% summarize(count = n()) fig &lt;- df %&gt;% plot_ly(labels = ~manuf, values = ~count) fig &lt;- fig %&gt;% add_pie(hole = 0.6) fig &lt;- fig %&gt;% layout(title = &quot;Donut charts using Plotly&quot;, showlegend = F, xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE), yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)) fig 2.5 Bubble Charts 2.5.1 Simple Bubble Chart library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, marker = list(size = ~Gap, opacity = 0.5)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE)) fig 2.5.2 Mapping a Color Variable (Continuous) library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, color = ~Gap, colors = &#39;Reds&#39;, marker = list(size = ~Gap, opacity = 0.5)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE)) fig 2.5.3 Mapping a Color Variable (Categorical) library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) data$State &lt;- as.factor(c(&#39;Massachusetts&#39;, &#39;California&#39;, &#39;Massachusetts&#39;, &#39;Pennsylvania&#39;, &#39;New Jersey&#39;, &#39;Illinois&#39;, &#39;Washington DC&#39;, &#39;Massachusetts&#39;, &#39;Connecticut&#39;, &#39;New York&#39;, &#39;North Carolina&#39;, &#39;New Hampshire&#39;, &#39;New York&#39;, &#39;Indiana&#39;, &#39;New York&#39;, &#39;Michigan&#39;, &#39;Rhode Island&#39;, &#39;California&#39;, &#39;Georgia&#39;, &#39;California&#39;, &#39;California&#39;)) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, size = ~Gap, color = ~State, colors = &#39;Paired&#39;, marker = list(opacity = 0.5, sizemode = &#39;diameter&#39;)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE), showlegend = FALSE) fig 2.5.4 Styled Buble Chart library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/gapminderDataFiveYear.csv&quot;) data_2007 &lt;- data[which(data$year == 2007),] data_2007 &lt;- data_2007[order(data_2007$continent, data_2007$country),] slope &lt;- 2.666051223553066e-05 data_2007$size &lt;- sqrt(data_2007$pop * slope) colors &lt;- c(&#39;#4AC6B7&#39;, &#39;#1972A4&#39;, &#39;#965F8A&#39;, &#39;#FF7070&#39;, &#39;#C61951&#39;) fig &lt;- plot_ly(data_2007, x = ~gdpPercap, y = ~lifeExp, color = ~continent, size = ~size, colors = colors, type = &#39;scatter&#39;, mode = &#39;markers&#39;, sizes = c(min(data_2007$size), max(data_2007$size)), marker = list(symbol = &#39;circle&#39;, sizemode = &#39;diameter&#39;, line = list(width = 2, color = &#39;#FFFFFF&#39;)), text = ~paste(&#39;Country:&#39;, country, &#39;&lt;br&gt;Life Expectancy:&#39;, lifeExp, &#39;&lt;br&gt;GDP:&#39;, gdpPercap, &#39;&lt;br&gt;Pop.:&#39;, pop)) fig &lt;- fig %&gt;% layout(title = &#39;Life Expectancy v. Per Capita GDP, 2007&#39;, xaxis = list(title = &#39;GDP per capita (2000 dollars)&#39;, gridcolor = &#39;rgb(255, 255, 255)&#39;, range = c(2.003297660701705, 5.191505530708712), type = &#39;log&#39;, zerolinewidth = 1, ticklen = 5, gridwidth = 2), yaxis = list(title = &#39;Life Expectancy (years)&#39;, gridcolor = &#39;rgb(255, 255, 255)&#39;, range = c(36.12621671352166, 91.72921793264332), zerolinewidth = 1, ticklen = 5, gridwith = 2), paper_bgcolor = &#39;rgb(243, 243, 243)&#39;, plot_bgcolor = &#39;rgb(243, 243, 243)&#39;) fig 2.6 Sankey Diagram 2.6.1 Basic Sankey Diagram library(plotly) fig &lt;- plot_ly( type = &quot;sankey&quot;, orientation = &quot;h&quot;, node = list( label = c(&quot;A1&quot;, &quot;A2&quot;, &quot;B1&quot;, &quot;B2&quot;, &quot;C1&quot;, &quot;C2&quot;), color = c(&quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;), pad = 15, thickness = 20, line = list( color = &quot;black&quot;, width = 0.5 ) ), link = list( source = c(0,1,0,2,3,3), target = c(2,3,3,4,4,5), value = c(8,4,2,8,4,2) ) ) fig &lt;- fig %&gt;% layout( title = &quot;Basic Sankey Diagram&quot;, font = list( size = 10 ) ) fig 2.6.2 Style Sankey Diagram library(plotly) library(rjson) json_file &lt;- &quot;https://raw.githubusercontent.com/plotly/plotly.js/master/test/image/mocks/sankey_energy_dark.json&quot; json_data &lt;- fromJSON(paste(readLines(json_file), collapse=&quot;&quot;)) fig &lt;- plot_ly( type = &quot;sankey&quot;, domain = list( x = c(0,1), y = c(0,1) ), orientation = &quot;h&quot;, valueformat = &quot;.0f&quot;, valuesuffix = &quot;TWh&quot;, node = list( label = json_data$data[[1]]$node$label, color = json_data$data[[1]]$node$color, pad = 15, thickness = 15, line = list( color = &quot;black&quot;, width = 0.5 ) ), link = list( source = json_data$data[[1]]$link$source, target = json_data$data[[1]]$link$target, value = json_data$data[[1]]$link$value, label = json_data$data[[1]]$link$label ) ) fig &lt;- fig %&gt;% layout( title = &quot;Energy forecast for 2050&lt;br&gt;Source: Department of Energy &amp; Climate Change, Tom Counsell via &lt;a href=&#39;https://bost.ocks.org/mike/sankey/&#39;&gt;Mike Bostock&lt;/a&gt;&quot;, font = list( size = 10, color = &#39;white&#39; ), xaxis = list(showgrid = F, zeroline = F, showticklabels = F), yaxis = list(showgrid = F, zeroline = F, showticklabels = F), plot_bgcolor = &#39;black&#39;, paper_bgcolor = &#39;black&#39; ) fig "],["statistical-charts.html", "Chapter 3 Statistical Charts 3.1 2D Histograms 3.2 Box Plot 3.3 Histograms 3.4 Error Bars 3.5 Violin Plots", " Chapter 3 Statistical Charts 3.1 2D Histograms 3.2 Box Plot 3.3 Histograms 3.4 Error Bars 3.5 Violin Plots "],["scientific-charts.html", "Chapter 4 Scientific Charts 4.1 Log Plots 4.2 Contour Plots 4.3 Heatmaps 4.4 Parallel Coordinates 4.5 Polar Charts 4.6 Radar Charts", " Chapter 4 Scientific Charts 4.1 Log Plots 4.1.1 Log Axes library(plotly) d &lt;- diamonds[sample(nrow(diamonds), 1000), ] # without log scales fig &lt;- plot_ly(d, x = ~carat, y = ~price) %&gt;% add_markers() fig # with log scales fig &lt;- layout(fig, xaxis = list(type = &quot;log&quot;), yaxis = list(type = &quot;log&quot;)) fig 4.2 Contour Plots 4.2.1 Basic Contour library(plotly) fig &lt;- plot_ly(z = ~volcano, type = &quot;contour&quot;) fig 4.2.2 Smoothing Contour Coloring library(plotly) fig &lt;- plot_ly( type = &#39;contour&#39;, z = matrix(c(10, 10.625, 12.5, 15.625, 20, 5.625, 6.25, 8.125, 11.25, 15.625, 2.5, 3.125, 5, 8.125, 12.5, 0.625, 1.25, 3.125, 6.25, 10.625, 0, 0.625, 2.5, 5.625, 10), nrow=5, ncol=5), contours = list( coloring = &#39;heatmap&#39; ) ) fig 4.3 Heatmaps 4.3.1 Basic Heatmap library(plotly) fig &lt;- plot_ly(z = volcano, type = &quot;heatmap&quot;) fig 4.3.2 Sequential Colorscales: Greys fig &lt;- plot_ly(z = volcano, colors = &quot;Greys&quot;, type = &quot;heatmap&quot;) fig 4.4 Parallel Coordinates 4.4.1 Basic Parallel Cordinates Plots library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/iris.csv&quot;) fig &lt;- df %&gt;% plot_ly(type = &#39;parcoords&#39;, line = list(color = ~species_id, colorscale = list(c(0,&#39;red&#39;),c(0.5,&#39;green&#39;),c(1,&#39;blue&#39;))), dimensions = list( list(range = c(2,4.5), label = &#39;Sepal Width&#39;, values = ~sepal_width), list(range = c(4,8), constraintrange = c(5,6), label = &#39;Sepal Length&#39;, values = ~sepal_length), list(range = c(0,2.5), label = &#39;Petal Width&#39;, values = ~petal_width), list(range = c(1,7), label = &#39;Petal Length&#39;, values = ~petal_length) ) ) fig 4.4.2 Advanced Parallel Coordinates Plot library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/parcoords_data.csv&quot;) fig &lt;- df %&gt;% plot_ly(width = 1000, height = 600) fig &lt;- fig %&gt;% add_trace(type = &#39;parcoords&#39;, line = list(color = ~colorVal, colorscale = &#39;Jet&#39;, showscale = TRUE, reversescale = TRUE, cmin = -4000, cmax = -100), dimensions = list( list(range = c(~min(blockHeight),~max(blockHeight)), constraintrange = c(100000,150000), label = &#39;Block Height&#39;, values = ~blockHeight), list(range = c(~min(blockWidth),~max(blockWidth)), label = &#39;Block Width&#39;, values = ~blockWidth), list(tickvals = c(0,0.5,1,2,3), ticktext = c(&#39;A&#39;,&#39;AB&#39;,&#39;B&#39;,&#39;Y&#39;,&#39;Z&#39;), label = &#39;Cyclinder Material&#39;, values = ~cycMaterial), list(range = c(-1,4), tickvals = c(0,1,2,3), label = &#39;Block Material&#39;, values = ~blockMaterial), list(range = c(~min(totalWeight),~max(totalWeight)), visible = TRUE, label = &#39;Total Weight&#39;, values = ~totalWeight), list(range = c(~min(assemblyPW),~max(assemblyPW)), label = &#39;Assembly Penalty Weight&#39;, values = ~assemblyPW), list(range = c(~min(HstW),~max(HstW)), label = &#39;Height st Width&#39;, values = ~HstW), list(range = c(~min(minHW),~max(minHW)), label = &#39;Min Height Width&#39;, values = ~minHW), list(range = c(~min(minWD),~max(minWD)), label = &#39;Min Width Diameter&#39;, values = ~minWD), list(range = c(~min(rfBlock),~max(rfBlock)), label = &#39;RF Block&#39;, values = ~rfBlock) ) ) fig 4.5 Polar Charts 4.5.1 Basic Polar Charts library(plotly) fig &lt;- plot_ly( type = &#39;scatterpolar&#39;, r = c(0,1,2,2), theta = c(0,45,90,0), mode = &#39;markers&#39; ) fig 4.5.2 Line Polar Charts library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/polar_dataset.csv&quot;) fig &lt;- plot_ly( df, type = &#39;scatterpolar&#39;, mode = &#39;lines&#39; ) fig &lt;- fig %&gt;% add_trace( r = ~x1, theta = ~y, name = &#39;Figure8&#39;, line = list( color = &#39;peru&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = ~x2, theta = ~y, name = &#39;Cardioid&#39;, line = list( color = &#39;darkviolet&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = ~x3, theta = ~y, name = &#39;Hypercardioid&#39;, line = list( color = &#39;deepskyblue&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = ~x4, theta = ~y, name = &#39;Subcardioid&#39;, line = list( color = &#39;orangered&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = ~x5, theta = ~y, name = &#39;Supercardioid&#39;, line = list( color = &#39;green&#39; ) ) fig &lt;- fig %&gt;% layout( title = &#39;Mic Patterns&#39;, font = list( family = &#39;Arial&#39;, size = 12, color = &#39;#000&#39; ), showlegend = F ) fig 4.5.3 Area Polar Area library(plotly) fig &lt;- plot_ly( type = &#39;scatterpolar&#39;, mode = &#39;lines&#39; ) fig &lt;- fig %&gt;% add_trace( r = c(0, 1.5, 1.5, 0, 2.5, 2.5, 0), theta = c(0, 10, 25, 0, 205, 215, 0), fill = &#39;toself&#39;, fillcolor = &#39;#709Bff&#39;, line = list( color = &#39;black&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = c(0, 3.5, 3.5, 0), theta = c(0, 55, 75, 0), fill = &#39;toself&#39;, fillcolor = &#39;#E4FF87&#39;, line = list( color = &#39;black&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = c(0, 4.5, 4.5, 0, 4.5, 4.5, 0), theta = c(0, 100, 120, 0, 305, 320, 0), fill = &#39;toself&#39;, fillcolor = &#39;#FFAA70&#39;, line = list( color = &#39;black&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = c(0, 4, 4, 0), theta = c(0, 165, 195, 0), fill = &#39;toself&#39;, fillcolor = &#39;#FFDF70&#39;, line = list( color = &#39;black&#39; ) ) fig &lt;- fig %&gt;% add_trace( r = c(0, 3, 3, 0), theta = c(0, 262.5, 277.5, 0), fill = &#39;toself&#39;, fillcolor = &#39;#B6FFB4&#39;, line = list( color = &#39;black&#39; ) ) fig &lt;- fig %&gt;% layout( polar = list( radialaxis = list( visible = T, range = c(0,5) ) ), showlegend = F ) fig 4.6 Radar Charts 4.6.1 Basic Radar Charts library(plotly) fig &lt;- plot_ly( type = &#39;scatterpolar&#39;, r = c(39, 28, 8, 7, 28, 39), theta = c(&#39;A&#39;,&#39;B&#39;,&#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;A&#39;), fill = &#39;toself&#39; ) fig &lt;- fig %&gt;% layout( polar = list( radialaxis = list( visible = T, range = c(0,50) ) ), showlegend = F ) fig 4.6.2 Multiple Trace Radar Charts library(plotly) fig &lt;- plot_ly( type = &#39;scatterpolar&#39;, fill = &#39;toself&#39; ) fig &lt;- fig %&gt;% add_trace( r = c(39, 28, 8, 7, 28, 39), theta = c(&#39;A&#39;,&#39;B&#39;,&#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;A&#39;), name = &#39;Group A&#39; ) fig &lt;- fig %&gt;% add_trace( r = c(1.5, 10, 39, 31, 15, 1.5), theta = c(&#39;A&#39;,&#39;B&#39;,&#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;A&#39;), name = &#39;Group B&#39; ) fig &lt;- fig %&gt;% layout( polar = list( radialaxis = list( visible = T, range = c(0,50) ) ) ) fig "],["financial-charts.html", "Chapter 5 Financial Charts 5.1 Time Series and Date Axess 5.2 Candlestick Charts 5.3 OHLC Charts 5.4 Waterfall Charts 5.5 Funnel Charts", " Chapter 5 Financial Charts 5.1 Time Series and Date Axess 5.1.1 Time Series using Axes of type date library(plotly) stock &lt;- read.csv(&#39;https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv&#39;) fig &lt;- plot_ly(stock, type = &#39;scatter&#39;, mode = &#39;lines&#39;)%&gt;% add_trace(x = ~Date, y = ~AAPL.High)%&gt;% layout(showlegend = F) fig &lt;- fig %&gt;% layout( xaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), yaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), plot_bgcolor=&#39;#e5ecf6&#39;, width = 900) fig 5.1.2 Configuring Tick Labels library(tidyquant) library(plotly) tickers = c(&quot;GOOG&quot;, &quot;AAPL&quot;, &quot;AMZN&quot;, &quot;META&quot;, &quot;NFLX&quot;, &quot;MSFT&quot;) for (i in tickers){ getSymbols(i, from = &quot;2020-01-01&quot;, to = &quot;2021-12-31&quot;)} stock &lt;- data.frame(GOOG$GOOG.Adjusted, AAPL$AAPL.Adjusted, AMZN$AMZN.Adjusted, META$META.Adjusted, NFLX$NFLX.Adjusted, MSFT$MSFT.Adjusted) stock$GOOG.Adjusted &lt;- stock$GOOG.Adjusted/stock$GOOG.Adjusted[1] stock$AAPL.Adjusted &lt;- stock$AAPL.Adjusted/stock$AAPL.Adjusted[1] stock$AMZN.Adjusted &lt;- stock$AMZN.Adjusted/stock$AMZN.Adjusted[1] stock$META.Adjusted &lt;- stock$META.Adjusted/stock$META.Adjusted[1] stock$NFLX.Adjusted &lt;- stock$NFLX.Adjusted/stock$NFLX.Adjusted[1] stock$MSFT.Adjusted &lt;- stock$MSFT.Adjusted/stock$MSFT.Adjusted[1] stock &lt;- data.frame(stock,rownames(stock)) colnames(stock) &lt;- append(tickers,&#39;Dates&#39;) fig &lt;- plot_ly(stock, type = &#39;scatter&#39;, mode = &#39;lines&#39;)%&gt;% add_trace(x = ~Dates, y = ~GOOG, name = &#39;GOOG&#39;)%&gt;% add_trace(x = ~Dates, y = ~AAPL, name = &#39;AAPL&#39;)%&gt;% add_trace(x = ~Dates, y = ~AMZN, name = &#39;AMZN&#39;)%&gt;% add_trace(x = ~Dates, y = ~META, name = &#39;META&#39;)%&gt;% add_trace(x = ~Dates, y = ~NFLX, name = &#39;NFLX&#39;)%&gt;% add_trace(x = ~Dates, y = ~MSFT, name = &#39;MSFT&#39;)%&gt;% layout(title = &#39;custom tick labels&#39;,legend=list(title=list(text=&#39;variable&#39;)), xaxis = list(dtick = &quot;M1&quot;, tickformat=&quot;%b&lt;br&gt;%Y&quot;), width = 1000) options(warn = -1) fig &lt;- fig %&gt;% layout( xaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), yaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), plot_bgcolor=&#39;#e5ecf6&#39;) fig 5.1.3 Time Series with Range Selector Buttons library(plotly) stock &lt;- read.csv(&#39;https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv&#39;) fig &lt;- plot_ly(stock, type = &#39;scatter&#39;, mode = &#39;lines&#39;)%&gt;% add_trace(x = ~Date, y = ~AAPL.High)%&gt;% layout(showlegend = F, title=&#39;Time Series with Range Slider and Selectors&#39;, xaxis = list(rangeslider = list(visible = T), rangeselector=list( buttons=list( list(count=1, label=&quot;1m&quot;, step=&quot;month&quot;, stepmode=&quot;backward&quot;), list(count=6, label=&quot;6m&quot;, step=&quot;month&quot;, stepmode=&quot;backward&quot;), list(count=1, label=&quot;YTD&quot;, step=&quot;year&quot;, stepmode=&quot;todate&quot;), list(count=1, label=&quot;1y&quot;, step=&quot;year&quot;, stepmode=&quot;backward&quot;), list(step=&quot;all&quot;) )))) fig &lt;- fig %&gt;% layout( xaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), yaxis = list(zerolinecolor = &#39;#ffff&#39;, zerolinewidth = 2, gridcolor = &#39;ffff&#39;), plot_bgcolor=&#39;#e5ecf6&#39;, margin = 0.1, width = 900) fig 5.2 Candlestick Charts 5.2.1 Basic Candlestick library(plotly) library(quantmod) getSymbols(&quot;AAPL&quot;,src=&#39;yahoo&#39;) # basic example of ohlc charts df &lt;- data.frame(Date=index(AAPL),coredata(AAPL)) df &lt;- tail(df, 30) fig &lt;- df %&gt;% plot_ly(x = ~Date, type=&quot;candlestick&quot;, open = ~AAPL.Open, close = ~AAPL.Close, high = ~AAPL.High, low = ~AAPL.Low) fig &lt;- fig %&gt;% layout(title = &quot;Basic Candlestick Chart&quot;) fig ## [1] &quot;AAPL&quot; 5.2.2 Customise the fig ure with Shapes and Annotations library(plotly) library(quantmod) getSymbols(&quot;AAPL&quot;,src=&#39;yahoo&#39;) df &lt;- data.frame(Date=index(AAPL),coredata(AAPL)) # annotation a &lt;- list(text = &quot;Stock Split&quot;, x = &#39;2014-06-06&#39;, y = 1.02, xref = &#39;x&#39;, yref = &#39;paper&#39;, xanchor = &#39;left&#39;, showarrow = FALSE ) # use shapes to create a line l &lt;- list(type = line, x0 = &#39;2014-06-06&#39;, x1 = &#39;2014-06-06&#39;, y0 = 0, y1 = 1, xref = &#39;x&#39;, yref = &#39;paper&#39;, line = list(color = &#39;black&#39;, width = 0.5) ) fig &lt;- df %&gt;% plot_ly(x = ~Date, type=&quot;candlestick&quot;, open = ~AAPL.Open, close = ~AAPL.Close, high = ~AAPL.High, low = ~AAPL.Low) fig &lt;- fig %&gt;% layout(title = &quot;Apple Stock&quot;, annotations = a, shapes = l) fig ## [1] &quot;AAPL&quot; 5.3 OHLC Charts 5.3.1 Basic OHLC Chart library(plotly) library(quantmod) getSymbols(&quot;AAPL&quot;,src=&#39;yahoo&#39;) df &lt;- data.frame(Date=index(AAPL),coredata(AAPL)) df &lt;- tail(df, 30) fig &lt;- df %&gt;% plot_ly(x = ~Date, type=&quot;ohlc&quot;, open = ~AAPL.Open, close = ~AAPL.Close, high = ~AAPL.High, low = ~AAPL.Low) fig &lt;- fig %&gt;% layout(title = &quot;Basic OHLC Chart&quot;, xaxis = list(rangeslider = list(visible = F))) fig ## [1] &quot;AAPL&quot; 5.3.2 Customise the Figure with Shapes and Annotations library(plotly) library(quantmod) getSymbols(&quot;AAPL&quot;,src=&#39;yahoo&#39;) df &lt;- data.frame(Date=index(AAPL),coredata(AAPL)) # annotation a &lt;- list(text = &quot;Stock Split&quot;, x = &#39;2014-06-06&#39;, y = 1.02, xref = &#39;x&#39;, yref = &#39;paper&#39;, xanchor = &#39;left&#39;, showarrow = FALSE ) # use shapes to create a line l &lt;- list(type = line, x0 = &#39;2014-06-06&#39;, x1 = &#39;2014-06-06&#39;, y0 = 0, y1 = 1, xref = &#39;x&#39;, yref = &#39;paper&#39;, line = list(color = &#39;black&#39;, width = 0.5) ) fig &lt;- df %&gt;% plot_ly(x = ~Date, type=&quot;ohlc&quot;, open = ~AAPL.Open, close = ~AAPL.Close, high = ~AAPL.High, low = ~AAPL.Low) fig &lt;- fig %&gt;% layout(title = &quot;Custom Colors&quot;, annotations = a, shapes = l) fig ## [1] &quot;AAPL&quot; 5.4 Waterfall Charts 5.4.1 Basic Waterfall Chart library(plotly) x= list(&quot;Sales&quot;, &quot;Consulting&quot;, &quot;Net revenue&quot;, &quot;Purchases&quot;, &quot;Other expenses&quot;, &quot;Profit before tax&quot;) measure= c(&quot;relative&quot;, &quot;relative&quot;, &quot;total&quot;, &quot;relative&quot;, &quot;relative&quot;, &quot;total&quot;) text= c(&quot;+60&quot;, &quot;+80&quot;, &quot;&quot;, &quot;-40&quot;, &quot;-20&quot;, &quot;Total&quot;) y= c(60, 80, 0, -40, -20, 0) data = data.frame(x=factor(x,levels=x),measure,text,y) fig &lt;- plot_ly( data, name = &quot;20&quot;, type = &quot;waterfall&quot;, measure = ~measure, x = ~x, textposition = &quot;outside&quot;, y= ~y, text =~text, connector = list(line = list(color= &quot;rgb(63, 63, 63)&quot;))) fig &lt;- fig %&gt;% layout(title = &quot;Profit and loss statement 2018&quot;, xaxis = list(title = &quot;&quot;), yaxis = list(title = &quot;&quot;), autosize = TRUE, showlegend = TRUE) fig 5.5 Funnel Charts # Need to install plotly from Github to get funnel plots devtools::install_github(&quot;ropensci/plotly&quot;) 5.5.1 Basic Funnel Plot library(plotly) fig &lt;- plot_ly() fig &lt;- fig %&gt;% add_trace( type = &quot;funnel&quot;, y = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;, &quot;invoice sent&quot;), x = c(39, 27.4, 20.6, 11, 2)) fig &lt;- fig %&gt;% layout(yaxis = list(categoryarray = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;, &quot;invoice sent&quot;))) fig 5.5.2 Stacked Funnel Plot library(plotly) fig &lt;- plot_ly( type = &quot;funnel&quot;, name = &#39;Montreal&#39;, y = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;), x = c(120, 60, 30, 20), textinfo = &quot;value+percent initial&quot;) fig &lt;- fig %&gt;% add_trace( type = &quot;funnel&quot;, name = &#39;Toronto&#39;, orientation = &quot;h&quot;, y = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;, &quot;invoice sent&quot;), x = c(100, 60, 40, 30, 20), textposition = &quot;inside&quot;, textinfo = &quot;value+percent previous&quot;) fig &lt;- fig %&gt;% add_trace( type = &quot;funnel&quot;, name = &#39;Vancouver&#39;, orientation = &quot;h&quot;, y = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;, &quot;invoice sent&quot;, &quot;Finalized&quot;), x = c(90, 70, 50, 30, 10, 5), textposition = &quot;outside&quot;, textinfo = &quot;value+percent total&quot;) fig &lt;- fig %&gt;% layout(yaxis = list(categoryarray = c(&quot;Website visit&quot;, &quot;Downloads&quot;, &quot;Potential customers&quot;, &quot;Requested price&quot;, &quot;invoice sent&quot;, &quot;Finalized&quot;))) fig 5.5.3 Basic Area Funnel Plot library(plotly) fig &lt;- plot_ly( type = &quot;funnelarea&quot;, text = c(&quot;The 1st&quot;,&quot;The 2nd&quot;, &quot;The 3rd&quot;, &quot;The 4th&quot;, &quot;The 5th&quot;), values = c(5, 4, 3, 2, 1)) fig "],["maps.html", "Chapter 6 Maps", " Chapter 6 Maps "],["artificial-intelligence-and-machine-learning.html", "Chapter 7 Artificial Intelligence and Machine Learning", " Chapter 7 Artificial Intelligence and Machine Learning "],["d-charts.html", "Chapter 8 3D Charts", " Chapter 8 3D Charts "],["transforms.html", "Chapter 9 Transforms 9.1 Filter 9.2 Group 9.3 Aggregation", " Chapter 9 Transforms 9.1 Filter 9.1.1 Basic Example library(plotly) fig &lt;- plot_ly( type = &#39;scatter&#39;, x = mtcars$hp, y = mtcars$qsec, text = rownames(mtcars), hoverinfo = &#39;text&#39;, mode = &#39;markers&#39;, transforms = list( list( type = &#39;filter&#39;, target = &#39;y&#39;, operation = &#39;&gt;&#39;, value = mean(mtcars$qsec) ) ) ) fig 9.2 Group 9.2.1 Basic Example library(plotly) fig &lt;- plot_ly( type = &#39;scatter&#39;, x = mtcars$hp, y = mtcars$qsec, text = paste(&quot;Make: &quot;, rownames(mtcars), &quot;&lt;br&gt;hp: &quot;, mtcars$hp, &quot;&lt;br&gt;qsec: &quot;, mtcars$qsec, &quot;&lt;br&gt;Cyl: &quot;, mtcars$cyl), hoverinfo = &#39;text&#39;, mode = &#39;markers&#39;, transforms = list( list( type = &#39;groupby&#39;, groups = mtcars$cyl, styles = list( list(target = 4, value = list(marker =list(color = &#39;blue&#39;))), list(target = 6, value = list(marker =list(color = &#39;red&#39;))), list(target = 8, value = list(marker =list(color = &#39;black&#39;))) ) ) ) ) fig 9.3 Aggregation 9.3.1 Basic Example library(plotly) fig &lt;- plot_ly( type = &#39;scatter&#39;, x = diamonds$cut, y = diamonds$price, mode = &#39;markers&#39;, transforms = list( list( type = &#39;aggregate&#39;, groups = diamonds$cut, aggregations = list( list( target = &#39;y&#39;, func = &#39;sum&#39;, enabled = T ) ) ) ) ) fig 9.3.2 Histogram Binning library(plotly) df &lt;- read.csv(&quot;https://plotly.com/~public.health/17.csv&quot;, skipNul = TRUE, encoding = &quot;UTF-8&quot;) labels &lt;- function(size, label) { list( args = c(&quot;xbins.size&quot;, size), label = label, method = &quot;restyle&quot; ) } fig &lt;- df %&gt;% plot_ly( x = ~date, autobinx = FALSE, autobiny = TRUE, marker = list(color = &quot;rgb(68, 68, 68)&quot;), name = &quot;date&quot;, type = &quot;histogram&quot;, xbins = list( end = &quot;2016-12-31 12:00&quot;, size = &quot;M1&quot;, start = &quot;1983-12-31 12:00&quot; ) ) fig &lt;- fig %&gt;% layout( paper_bgcolor = &quot;rgb(240, 240, 240)&quot;, plot_bgcolor = &quot;rgb(240, 240, 240)&quot;, title = &quot;&lt;b&gt;Shooting Incidents&lt;/b&gt;&lt;br&gt;use dropdown to change bin size&quot;, xaxis = list( type = &#39;date&#39; ), yaxis = list( title = &quot;Incidents&quot; ), updatemenus = list( list( x = 0.1, y = 1.15, active = 1, showactive = TRUE, buttons = list( labels(&quot;D1&quot;, &quot;Day&quot;), labels(&quot;M1&quot;, &quot;Month&quot;), labels(&quot;M6&quot;, &quot;Half Year&quot;), labels(&quot;M12&quot;, &quot;Year&quot;) ) ) ) ) fig 9.3.3 Mapping with Aggregations library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/worldhappiness.csv&quot;) s &lt;- schema() agg &lt;- s$transforms$aggregate$attributes$aggregations$items$aggregation$func$values l = list() for (i in 1:length(agg)) { ll = list(method = &quot;restyle&quot;, args = list(&#39;transforms[0].aggregations[0].func&#39;, agg[i]), label = agg[i]) l[[i]] = ll } fig &lt;- df %&gt;% plot_ly( type = &#39;choropleth&#39;, locationmode = &#39;country names&#39;, locations = ~Country, z = ~HappinessScore, autocolorscale = F, reversescale = T, colorscale = &#39;Portland&#39;, transforms = list(list( type = &#39;aggregate&#39;, groups = ~Country, aggregations = list( list(target = &#39;z&#39;, func = &#39;sum&#39;, enabled = T) ) )) ) fig &lt;- fig %&gt;% layout( title = &quot;&lt;b&gt;World Happiness&lt;/b&gt;&quot;, geo = list( showframe = F, showcoastlines = F ), updatemenus = list( list( x = 0.25, y = 1.04, xref = &#39;paper&#39;, yref = &#39;paper&#39;, yanchor = &#39;top&#39;, buttons = l ) ) ) fig "],["animations.html", "Chapter 10 Animations", " Chapter 10 Animations "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
