[["index.html", "Plotly Cheatsheet Chapter 1 Introduction 1.1 Getting Start 1.2 Installation", " Plotly Cheatsheet Taichen Zhou, Yichen Huang 2022-11-04 Chapter 1 Introduction 1.1 Getting Start plotly is an R package for creating interactive web-based graphs via the open source JavaScript graphing library plotly.js. As of version 2.0 (November 17, 2015), graphs created with the plotly R package are rendered locally through the htmlwidgets framework. 1.2 Installation 1.2.1 CRAN Use the install.package() function to install the plotly R package from CRAN. This version may not be the absolute latest version, so we recommend downloading from Github using the instructions below if you can. install.packages(&#39;plotly&#39;) 1.2.2 GitHub Alternatively, you can install the latest development version of plotly from GitHub via the devtools R package: devtools::install_github(&quot;ropensci/plotly&quot;) "],["basic-charts.html", "Chapter 2 Basic Charts 2.1 Scatter Plots 2.2 Line Plots 2.3 Bar Charts 2.4 Pie Charts 2.5 Bubble Charts 2.6 Sankey Diagram", " Chapter 2 Basic Charts 2.1 Scatter Plots 2.1.1 Basic Scatter Plot library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y= ~mpg, type = &quot;scatter&quot;, mode = &quot;markers&quot;) fig 2.1.2 Styled Scatter Plots library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y= ~mpg, type = &quot;scatter&quot;, mode = &quot;markers&quot;ï¼Œ marker = list(size = 10, color = &#39;rgba(255, 182, 193, .9)&#39;, line = list(color = &#39;rgba(152, 0, 0, .8)&#39;, width = 2))) fig &lt;- fig %&gt;% layout(title = &#39;Styled Scatter&#39;, yaxis = list(zeroline = FALSE), xaxis = list(zeroline = FALSE)) fig 2.1.3 Qualitative Colorscales library(plotly) fig &lt;- plot_ly(data = mtcars, x = ~hp, y = ~mpg, color = ~cyl) fig 2.2 Line Plots 2.2.1 Basic Line Plot library(plotly) x &lt;- c(1:100) random_y &lt;- rnorm(100, mean = 0) data &lt;- data.frame(x, random_y) fig &lt;- plot_ly(data, x = ~x, y = ~random_y, type = &#39;scatter&#39;, mode = &#39;lines&#39;) fig 2.2.2 Line Plots Mode library(plotly) trace_0 &lt;- rnorm(100, mean = 5) trace_1 &lt;- rnorm(100, mean = 0) trace_2 &lt;- rnorm(100, mean = -5) x &lt;- c(1:100) data &lt;- data.frame(x, trace_0, trace_1, trace_2) fig &lt;- plot_ly(data, x = ~x, y = ~trace_0, name = &#39;trace 0&#39;, type = &#39;scatter&#39;, mode = &#39;lines&#39;) fig &lt;- fig %&gt;% add_trace(y = ~trace_1, name = &#39;trace 1&#39;, mode = &#39;lines+markers&#39;) fig &lt;- fig %&gt;% add_trace(y = ~trace_2, name = &#39;trace 2&#39;, mode = &#39;markers&#39;) fig 2.2.3 Density Plot library(plotly) dens &lt;- with(diamonds, tapply(price, INDEX = cut, density)) df &lt;- data.frame( x = unlist(lapply(dens, &quot;[[&quot;, &quot;x&quot;)), y = unlist(lapply(dens, &quot;[[&quot;, &quot;y&quot;)), cut = rep(names(dens), each = length(dens[[1]]$x)) ) fig &lt;- plot_ly(df, x = ~x, y = ~y, color = ~cut) fig &lt;- fig %&gt;% add_lines() fig 2.3 Bar Charts 2.3.1 Basic Bar Chart library(plotly) fig &lt;- plot_ly( x = c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;), y = c(20, 14, 23), name = &quot;SF Zoo&quot;, type = &quot;bar&quot; ) fig 2.3.2 Grouped Bar Chart library(plotly) Animals &lt;- c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;) SF_Zoo &lt;- c(20, 14, 23) LA_Zoo &lt;- c(12, 18, 29) data &lt;- data.frame(Animals, SF_Zoo, LA_Zoo) fig &lt;- plot_ly(data, x = ~Animals, y = ~SF_Zoo, type = &#39;bar&#39;, name = &#39;SF Zoo&#39;) fig &lt;- fig %&gt;% add_trace(y = ~LA_Zoo, name = &#39;LA Zoo&#39;) fig &lt;- fig %&gt;% layout(yaxis = list(title = &#39;Count&#39;), barmode = &#39;group&#39;) fig 2.3.3 Stacked Bar Chart library(plotly) Animals &lt;- c(&quot;giraffes&quot;, &quot;orangutans&quot;, &quot;monkeys&quot;) SF_Zoo &lt;- c(20, 14, 23) LA_Zoo &lt;- c(12, 18, 29) data &lt;- data.frame(Animals, SF_Zoo, LA_Zoo) fig &lt;- plot_ly(data, x = ~Animals, y = ~SF_Zoo, type = &#39;bar&#39;, name = &#39;SF Zoo&#39;) fig &lt;- fig %&gt;% add_trace(y = ~LA_Zoo, name = &#39;LA Zoo&#39;) fig &lt;- fig %&gt;% layout(yaxis = list(title = &#39;Count&#39;), barmode = &#39;stack&#39;) fig 2.3.4 Colored and Styled Bar Chart library(plotly) x &lt;- c(1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012) roW &lt;- c(219, 146, 112, 127, 124, 180, 236, 207, 236, 263, 350, 430, 474, 526, 488, 537, 500, 439) China &lt;- c(16, 13, 10, 11, 28, 37, 43, 55, 56, 88, 105, 156, 270, 299, 340, 403, 549, 499) data &lt;- data.frame(x, roW, China) fig &lt;- plot_ly(data, x = ~x, y = ~roW, type = &#39;bar&#39;, name = &#39;Rest of the World&#39;, marker = list(color = &#39;rgb(55, 83, 109)&#39;)) fig &lt;- fig %&gt;% add_trace(y = ~China, name = &#39;China&#39;, marker = list(color = &#39;rgb(26, 118, 255)&#39;)) fig &lt;- fig %&gt;% layout(title = &#39;US Export of Plastic Scrap&#39;, xaxis = list( title = &quot;&quot;, tickfont = list( size = 14, color = &#39;rgb(107, 107, 107)&#39;)), yaxis = list( title = &#39;USD (millions)&#39;, titlefont = list( size = 16, color = &#39;rgb(107, 107, 107)&#39;), tickfont = list( size = 14, color = &#39;rgb(107, 107, 107)&#39;)), legend = list(x = 0, y = 1, bgcolor = &#39;rgba(255, 255, 255, 0)&#39;, bordercolor = &#39;rgba(255, 255, 255, 0)&#39;), barmode = &#39;group&#39;, bargap = 0.15, bargroupgap = 0.1) fig 2.4 Pie Charts 2.4.1 Basic Pie Chart library(plotly) USPersonalExpenditure &lt;- data.frame(&quot;Categorie&quot;=rownames(USPersonalExpenditure), USPersonalExpenditure) data &lt;- USPersonalExpenditure[,c(&#39;Categorie&#39;, &#39;X1960&#39;)] fig &lt;- plot_ly(data, labels = ~Categorie, values = ~X1960, type = &#39;pie&#39;) fig &lt;- fig %&gt;% layout(title = &#39;United States Personal Expenditures by Categories in 1960&#39;, xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE), yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)) fig 2.4.2 Donut Chart library(plotly) library(dplyr) # Get Manufacturer mtcars$manuf &lt;- sapply(strsplit(rownames(mtcars), &quot; &quot;), &quot;[[&quot;, 1) df &lt;- mtcars df &lt;- df %&gt;% group_by(manuf) df &lt;- df %&gt;% summarize(count = n()) fig &lt;- df %&gt;% plot_ly(labels = ~manuf, values = ~count) fig &lt;- fig %&gt;% add_pie(hole = 0.6) fig &lt;- fig %&gt;% layout(title = &quot;Donut charts using Plotly&quot;, showlegend = F, xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE), yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)) fig 2.5 Bubble Charts 2.5.1 Simple Bubble Chart library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, marker = list(size = ~Gap, opacity = 0.5)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE)) fig 2.5.2 Mapping a Color Variable (Continuous) library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, color = ~Gap, colors = &#39;Reds&#39;, marker = list(size = ~Gap, opacity = 0.5)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE)) fig 2.5.3 Mapping a Color Variable (Categorical) library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/school_earnings.csv&quot;) data$State &lt;- as.factor(c(&#39;Massachusetts&#39;, &#39;California&#39;, &#39;Massachusetts&#39;, &#39;Pennsylvania&#39;, &#39;New Jersey&#39;, &#39;Illinois&#39;, &#39;Washington DC&#39;, &#39;Massachusetts&#39;, &#39;Connecticut&#39;, &#39;New York&#39;, &#39;North Carolina&#39;, &#39;New Hampshire&#39;, &#39;New York&#39;, &#39;Indiana&#39;, &#39;New York&#39;, &#39;Michigan&#39;, &#39;Rhode Island&#39;, &#39;California&#39;, &#39;Georgia&#39;, &#39;California&#39;, &#39;California&#39;)) fig &lt;- plot_ly(data, x = ~Women, y = ~Men, text = ~School, type = &#39;scatter&#39;, mode = &#39;markers&#39;, size = ~Gap, color = ~State, colors = &#39;Paired&#39;, marker = list(opacity = 0.5, sizemode = &#39;diameter&#39;)) fig &lt;- fig %&gt;% layout(title = &#39;Gender Gap in Earnings per University&#39;, xaxis = list(showgrid = FALSE), yaxis = list(showgrid = FALSE), showlegend = FALSE) fig 2.5.4 Styled Buble Chart library(plotly) data &lt;- read.csv(&quot;https://raw.githubusercontent.com/plotly/datasets/master/gapminderDataFiveYear.csv&quot;) data_2007 &lt;- data[which(data$year == 2007),] data_2007 &lt;- data_2007[order(data_2007$continent, data_2007$country),] slope &lt;- 2.666051223553066e-05 data_2007$size &lt;- sqrt(data_2007$pop * slope) colors &lt;- c(&#39;#4AC6B7&#39;, &#39;#1972A4&#39;, &#39;#965F8A&#39;, &#39;#FF7070&#39;, &#39;#C61951&#39;) fig &lt;- plot_ly(data_2007, x = ~gdpPercap, y = ~lifeExp, color = ~continent, size = ~size, colors = colors, type = &#39;scatter&#39;, mode = &#39;markers&#39;, sizes = c(min(data_2007$size), max(data_2007$size)), marker = list(symbol = &#39;circle&#39;, sizemode = &#39;diameter&#39;, line = list(width = 2, color = &#39;#FFFFFF&#39;)), text = ~paste(&#39;Country:&#39;, country, &#39;&lt;br&gt;Life Expectancy:&#39;, lifeExp, &#39;&lt;br&gt;GDP:&#39;, gdpPercap, &#39;&lt;br&gt;Pop.:&#39;, pop)) fig &lt;- fig %&gt;% layout(title = &#39;Life Expectancy v. Per Capita GDP, 2007&#39;, xaxis = list(title = &#39;GDP per capita (2000 dollars)&#39;, gridcolor = &#39;rgb(255, 255, 255)&#39;, range = c(2.003297660701705, 5.191505530708712), type = &#39;log&#39;, zerolinewidth = 1, ticklen = 5, gridwidth = 2), yaxis = list(title = &#39;Life Expectancy (years)&#39;, gridcolor = &#39;rgb(255, 255, 255)&#39;, range = c(36.12621671352166, 91.72921793264332), zerolinewidth = 1, ticklen = 5, gridwith = 2), paper_bgcolor = &#39;rgb(243, 243, 243)&#39;, plot_bgcolor = &#39;rgb(243, 243, 243)&#39;) fig 2.6 Sankey Diagram 2.6.1 Basic Sankey Diagram library(plotly) fig &lt;- plot_ly( type = &quot;sankey&quot;, orientation = &quot;h&quot;, node = list( label = c(&quot;A1&quot;, &quot;A2&quot;, &quot;B1&quot;, &quot;B2&quot;, &quot;C1&quot;, &quot;C2&quot;), color = c(&quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;), pad = 15, thickness = 20, line = list( color = &quot;black&quot;, width = 0.5 ) ), link = list( source = c(0,1,0,2,3,3), target = c(2,3,3,4,4,5), value = c(8,4,2,8,4,2) ) ) fig &lt;- fig %&gt;% layout( title = &quot;Basic Sankey Diagram&quot;, font = list( size = 10 ) ) fig 2.6.2 Style Sankey Diagram library(plotly) library(rjson) json_file &lt;- &quot;https://raw.githubusercontent.com/plotly/plotly.js/master/test/image/mocks/sankey_energy_dark.json&quot; json_data &lt;- fromJSON(paste(readLines(json_file), collapse=&quot;&quot;)) fig &lt;- plot_ly( type = &quot;sankey&quot;, domain = list( x = c(0,1), y = c(0,1) ), orientation = &quot;h&quot;, valueformat = &quot;.0f&quot;, valuesuffix = &quot;TWh&quot;, node = list( label = json_data$data[[1]]$node$label, color = json_data$data[[1]]$node$color, pad = 15, thickness = 15, line = list( color = &quot;black&quot;, width = 0.5 ) ), link = list( source = json_data$data[[1]]$link$source, target = json_data$data[[1]]$link$target, value = json_data$data[[1]]$link$value, label = json_data$data[[1]]$link$label ) ) fig &lt;- fig %&gt;% layout( title = &quot;Energy forecast for 2050&lt;br&gt;Source: Department of Energy &amp; Climate Change, Tom Counsell via &lt;a href=&#39;https://bost.ocks.org/mike/sankey/&#39;&gt;Mike Bostock&lt;/a&gt;&quot;, font = list( size = 10, color = &#39;white&#39; ), xaxis = list(showgrid = F, zeroline = F, showticklabels = F), yaxis = list(showgrid = F, zeroline = F, showticklabels = F), plot_bgcolor = &#39;black&#39;, paper_bgcolor = &#39;black&#39; ) fig "],["statistical-charts.html", "Chapter 3 Statistical Charts 3.1 2D Histograms 3.2 Box Plot 3.3 Histograms 3.4 Error Bars 3.5 Violin Plots", " Chapter 3 Statistical Charts 3.1 2D Histograms 3.2 Box Plot 3.3 Histograms 3.4 Error Bars 3.5 Violin Plots "],["scientific-charts.html", "Chapter 4 Scientific Charts 4.1 Log Plots 4.2 Contour Plots 4.3 Heatmaps 4.4 Parallel Coordinates 4.5 Polar Charts 4.6 Radar Charts", " Chapter 4 Scientific Charts 4.1 Log Plots 4.1.1 Log Axes library(plotly) d &lt;- diamonds[sample(nrow(diamonds), 1000), ] # without log scales fig &lt;- plot_ly(d, x = ~carat, y = ~price) %&gt;% add_markers() fig # with log scales fig &lt;- layout(fig, xaxis = list(type = &quot;log&quot;), yaxis = list(type = &quot;log&quot;)) fig 4.2 Contour Plots 4.2.1 Basic Contour library(plotly) fig &lt;- plot_ly(z = ~volcano, type = &quot;contour&quot;) fig 4.2.2 Smoothing Contour Coloring library(plotly) fig &lt;- plot_ly( type = &#39;contour&#39;, z = matrix(c(10, 10.625, 12.5, 15.625, 20, 5.625, 6.25, 8.125, 11.25, 15.625, 2.5, 3.125, 5, 8.125, 12.5, 0.625, 1.25, 3.125, 6.25, 10.625, 0, 0.625, 2.5, 5.625, 10), nrow=5, ncol=5), contours = list( coloring = &#39;heatmap&#39; ) ) fig 4.3 Heatmaps 4.3.1 Basic Heatmap library(plotly) fig &lt;- plot_ly(z = volcano, type = &quot;heatmap&quot;) fig 4.3.2 Sequential Colorscales: Greys fig &lt;- plot_ly(z = volcano, colors = &quot;Greys&quot;, type = &quot;heatmap&quot;) fig 4.4 Parallel Coordinates 4.4.1 Basic Parallel Cordinates Plots library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/iris.csv&quot;) fig &lt;- df %&gt;% plot_ly(type = &#39;parcoords&#39;, line = list(color = ~species_id, colorscale = list(c(0,&#39;red&#39;),c(0.5,&#39;green&#39;),c(1,&#39;blue&#39;))), dimensions = list( list(range = c(2,4.5), label = &#39;Sepal Width&#39;, values = ~sepal_width), list(range = c(4,8), constraintrange = c(5,6), label = &#39;Sepal Length&#39;, values = ~sepal_length), list(range = c(0,2.5), label = &#39;Petal Width&#39;, values = ~petal_width), list(range = c(1,7), label = &#39;Petal Length&#39;, values = ~petal_length) ) ) fig 4.4.2 Advanced Parallel Coordinates Plot library(plotly) df &lt;- read.csv(&quot;https://raw.githubusercontent.com/bcdunbar/datasets/master/parcoords_data.csv&quot;) fig &lt;- df %&gt;% plot_ly(width = 1000, height = 600) fig &lt;- fig %&gt;% add_trace(type = &#39;parcoords&#39;, line = list(color = ~colorVal, colorscale = &#39;Jet&#39;, showscale = TRUE, reversescale = TRUE, cmin = -4000, cmax = -100), dimensions = list( list(range = c(~min(blockHeight),~max(blockHeight)), constraintrange = c(100000,150000), label = &#39;Block Height&#39;, values = ~blockHeight), list(range = c(~min(blockWidth),~max(blockWidth)), label = &#39;Block Width&#39;, values = ~blockWidth), list(tickvals = c(0,0.5,1,2,3), ticktext = c(&#39;A&#39;,&#39;AB&#39;,&#39;B&#39;,&#39;Y&#39;,&#39;Z&#39;), label = &#39;Cyclinder Material&#39;, values = ~cycMaterial), list(range = c(-1,4), tickvals = c(0,1,2,3), label = &#39;Block Material&#39;, values = ~blockMaterial), list(range = c(~min(totalWeight),~max(totalWeight)), visible = TRUE, label = &#39;Total Weight&#39;, values = ~totalWeight), list(range = c(~min(assemblyPW),~max(assemblyPW)), label = &#39;Assembly Penalty Weight&#39;, values = ~assemblyPW), list(range = c(~min(HstW),~max(HstW)), label = &#39;Height st Width&#39;, values = ~HstW), list(range = c(~min(minHW),~max(minHW)), label = &#39;Min Height Width&#39;, values = ~minHW), list(range = c(~min(minWD),~max(minWD)), label = &#39;Min Width Diameter&#39;, values = ~minWD), list(range = c(~min(rfBlock),~max(rfBlock)), label = &#39;RF Block&#39;, values = ~rfBlock) ) ) fig 4.5 Polar Charts 4.6 Radar Charts "],["financial-charts.html", "Chapter 5 Financial Charts", " Chapter 5 Financial Charts "],["maps.html", "Chapter 6 Maps", " Chapter 6 Maps "],["artificial-intelligence-and-machine-learning.html", "Chapter 7 Artificial Intelligence and Machine Learning", " Chapter 7 Artificial Intelligence and Machine Learning "],["d-charts.html", "Chapter 8 3D Charts", " Chapter 8 3D Charts "],["transforms.html", "Chapter 9 Transforms", " Chapter 9 Transforms "],["animations.html", "Chapter 10 Animations", " Chapter 10 Animations "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
